<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Doto - 홈</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container text-center mt-5">
    <h1 class="mb-4">📋 Doto - 할 일 관리 프로젝트</h1>
    <div id="calendar"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
          var calendarEl = document.getElementById('calendar');
          var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            events: '/api/todos',  // GET 요청으로 JSON 이벤트 받아옴
            eventClick: function(info) {
              alert('To-Do 제목: ' + info.event.title);
              // 필요하면 모달창으로 상세/수정 처리
            },
            dateClick: function(info) {
              var title = prompt('새 할 일 제목을 입력하세요');
              if (title) {
                fetch('/api/todos', {
                  method: 'POST',
                  headers: {'Content-Type': 'application/json'},
                  body: JSON.stringify({
                    title: title,
                    startDate: info.dateStr,
                    endDate: info.dateStr,
                    completed: 0,
                    isDelete: 0
                  })
                }).then(() => calendar.refetchEvents());
              }
            }
          });
          calendar.render();
        });
    </script>
</div>
</body>
</html>

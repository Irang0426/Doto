<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Doto - í™ˆ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container text-center mt-5">
    <h1 class="mb-4">ğŸ“‹ Doto - í•  ì¼ ê´€ë¦¬ í”„ë¡œì íŠ¸</h1>
    <div id="calendar"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
          var calendarEl = document.getElementById('calendar');
          var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            events: '/api/todos',  // GET ìš”ì²­ìœ¼ë¡œ JSON ì´ë²¤íŠ¸ ë°›ì•„ì˜´
            eventClick: function(info) {
              alert('To-Do ì œëª©: ' + info.event.title);
              // í•„ìš”í•˜ë©´ ëª¨ë‹¬ì°½ìœ¼ë¡œ ìƒì„¸/ìˆ˜ì • ì²˜ë¦¬
            },
            dateClick: function(info) {
              var title = prompt('ìƒˆ í•  ì¼ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”');
              if (title) {
                fetch('/api/todos', {
                  method: 'POST',
                  headers: {'Content-Type': 'application/json'},
                  body: JSON.stringify({
                    title: title,
                    startDate: info.dateStr,
                    endDate: info.dateStr,
                    completed: 0,
                    isDelete: 0
                  })
                }).then(() => calendar.refetchEvents());
              }
            }
          });
          calendar.render();
        });
    </script>
</div>
</body>
</html>
